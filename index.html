<!DOCTYPE html>
<html>
    <head>

        <!--Added AFrame and AR.JS libraries-->
        <!-- A-Frane version 1.2.0 -->
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <!-- AR.JS marker and location support -->
        <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
        
        <script src="utilities.js"></script>

    </head>

    <body style="margin : 0px; overflow: hidden;">

        <!-- SCENE -->
        <!-- Modified scene settings to solve 'flickering' and 'shaking' problems.
            Enabled deepth buffer and changed camera resolution.-->
        <a-scene embedded arjs="debugUIEnabled: false" 
        renderer="logarithmicDepthBuffer: true;"
        trackingMethod= "best" vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;">        
        
        <!-- ASSETS -->
        <!-- Create assets for models/images/videos/etc-->
            <a-assets>
                <a-asset-item id="3dmodel" src="./resources/model/pallet.gltf"></a-asset-item>
                <img id="logo_img" src="./resources/images/logo_telecmotica.png">
            </a-assets>

            <!-- MARKER -->
            <!-- Enable smooth property for smoother 
                tracking and positioning when losing focus of the marker -->
            <a-marker smooth="true" smoothCount="10"
            markerhandler emitevents="true"
            id="marker" 
            preset="custom" type="pattern" url="./resources/qr/custom.patt">

                <!-- SCENE ENTITIES-->
                <!-- Entities that gonna show on our marker when is detected.
                     These entities will be children of the marker 
                     following the standard object hierarchy.-->

                <!-- LIGHTS-->
                <!--Added lights to improve the scene realism-->
                <a-entity light="type: ambient; color: #CCC; intensity:0.25" ></a-entity>
                <a-entity light="type: spot; angle:180" position="0 5 0"></a-entity>

            
                <!-- 3D MODELS-->
                <a-entity gltf-model="#3dmodel" id="pallet"
                scale="0.05 0.05 0.05"
                rotation="0 0 0"
                position="0 0 0"
                visible="true">
                </a-entity>

                <!-- IMAGES -->
                <a-image id="logo"
                position="0 3 0"
                scale="1 1 3"
                animation="property: rotation; dur: 15000; to: 0 360 0; loop: true"
                src="#logo_img">
                </a-image>
                 
            </a-marker>
            
            <!-- CAMERA -->
            <!-- Modified camera settings, far and near, to fix the flickering mesh problems-->
            <a-entity camera id="cameraSRC" camera="far:100000; near:0.01"></a-entity>
        
        </a-scene>

    </body>
</html>